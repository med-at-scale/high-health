{"content":{"metadata":{"name":"GA4GH Client","user_save_timestamp":"1970-01-01T01:00:00.000Z","auto_save_timestamp":"1970-01-01T01:00:00.000Z","language_info":{"name":"scala","file_extension":"scala","codemirror_mode":"text/x-scala"},"trusted":true,"custom":null},"cells":[{"metadata":{"trusted":true,"collapsed":true},"cell_type":"code","source":":local-repo /home/noootsab/.m2/repository","outputs":[{"name":"stdout","output_type":"stream","text":"res1: String = Repo changed to /home/noootsab/.m2/repository!\n"},{"metadata":{},"data":{"text/html":"Repo changed to /home/noootsab/.m2/repository!"},"output_type":"execute_result","execution_count":1}]},{"metadata":{"trusted":true,"collapsed":true},"cell_type":"code","source":":dp \nmed-at-scale        %  ga4gh-model-java % 0.1.0-SNAPSHOT\norg.apache.avro     %  avro-ipc         % 1.7.6\n- org.mortbay.jetty % org.eclipse.jetty % _","outputs":[{"name":"stdout","output_type":"stream","text":"jars: Array[String] = [Ljava.lang.String;@181863fc\nres1: List[String] = List(/home/noootsab/.m2/repository/org/apache/avro/avro/1.7.6/avro-1.7.6.jar, /home/noootsab/.m2/repository/org/apache/commons/commons-compress/1.4.1/commons-compress-1.4.1.jar, /home/noootsab/.m2/repository/org/scala-lang/scala-library/2.10.4/scala-library-2.10.4.jar, /home/noootsab/.m2/repository/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4.jar, /home/noootsab/.m2/repository/org/mortbay/jetty/jetty/6.1.26/jetty-6.1.26.jar, /home/noootsab/.m2/repository/med-at-scale/ga4gh-model-java/0.1.0-SNAPSHOT/ga4gh-model-java-0.1.0-SNAPSHOT.jar, /home/noootsab/.m2/repository/org/apache/velocity/velocity/1.7/velocity-1.7.jar, /home/noootsab/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar,..."},{"metadata":{},"data":{"text/html":"<table><tr><td>/home/noootsab/.m2/repository/org/apache/avro/avro/1.7.6/avro-1.7.6.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/apache/commons/commons-compress/1.4.1/commons-compress-1.4.1.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/scala-lang/scala-library/2.10.4/scala-library-2.10.4.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/mortbay/jetty/jetty/6.1.26/jetty-6.1.26.jar</td></tr><tr><td>/home/noootsab/.m2/repository/med-at-scale/ga4gh-model-java/0.1.0-SNAPSHOT/ga4gh-model-java-0.1.0-SNAPSHOT.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/apache/velocity/velocity/1.7/velocity-1.7.jar</td></tr><tr><td>/home/noootsab/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/apache/avro/avro-compiler/1.7.6/avro-compiler-1.7.6.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.13/jackson-mapper-asl-1.9.13.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/tukaani/xz/1.0/xz-1.0.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/mortbay/jetty/jetty-util/6.1.26/jetty-util-6.1.26.jar</td></tr><tr><td>/home/noootsab/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.13/jackson-core-asl-1.9.13.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/mortbay/jetty/servlet-api/2.5-20081211/servlet-api-2.5-20081211.jar</td></tr><tr><td>/home/noootsab/.m2/repository/io/netty/netty/3.4.0.Final/netty-3.4.0.Final.jar</td></tr><tr><td>/home/noootsab/.m2/repository/com/thoughtworks/paranamer/paranamer/2.3/paranamer-2.3.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/apache/avro/avro-ipc/1.7.6/avro-ipc-1.7.6.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/xerial/snappy/snappy-java/1.0.5/snappy-java-1.0.5.jar</td></tr><tr><td>/home/noootsab/.m2/repository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar</td></tr><tr><td>/home/noootsab/.m2/repository/org/slf4j/slf4j-simple/1.6.4/slf4j-simple-1.6.4.jar</td></tr></table>"},"output_type":"execute_result","execution_count":2}]},{"metadata":{"trusted":true,"collapsed":true},"cell_type":"code","source":"import org.apache.avro.ipc.NettyTransceiver\nimport java.net.InetSocketAddress\n\nval client = new NettyTransceiver(new InetSocketAddress(65001));","outputs":[{"name":"stdout","output_type":"stream","text":"import org.apache.avro.ipc.NettyTransceiver\nimport java.net.InetSocketAddress\nclient: org.apache.avro.ipc.NettyTransceiver = org.apache.avro.ipc.NettyTransceiver@62c1e8ea\n"},{"metadata":{},"data":{"text/html":"org.apache.avro.ipc.NettyTransceiver@62c1e8ea"},"output_type":"execute_result","execution_count":3}]},{"metadata":{"trusted":true,"collapsed":true},"cell_type":"code","source":"import org.apache.avro.ipc.specific.SpecificRequestor\nimport org.ga4gh.methods.VariantMethods\n\n// WARN â†’ this object is there to avoid the REPL to call `toString` on the proxy\n// Since toString is not defined in the RPC, calling `toString` on this proxy will $\n// result to: \n//  > org.apache.avro.AvroRuntimeException: Not a local message: toString\n\nobject Proxy { \n  // client code - attach to the server and send a message\n  val instance = SpecificRequestor.getClient(classOf[VariantMethods], client) match {\n    case x:VariantMethods => x\n    case y => throw new IllegalStateException(\"VariantMethods expected, got \" + y.getClass.getName)\n  }\n}\n\"Client built, got proxy\"","outputs":[{"name":"stdout","output_type":"stream","text":"import org.apache.avro.ipc.specific.SpecificRequestor\nimport org.ga4gh.methods.VariantMethods\ndefined module Proxy\nres3: String = Client built, got proxy\n"},{"metadata":{},"data":{"text/html":"Client built, got proxy"},"output_type":"execute_result","execution_count":6}]},{"metadata":{"trusted":true,"collapsed":true},"cell_type":"code","source":"import org.ga4gh.methods.SearchVariantsRequest\nimport scala.collection.JavaConversions._\nval request = new SearchVariantsRequest(\n  List(\"med-at-scale/chr22.vcf\"), // variantSetIds\n  \"notUsed\",                      // variantName\n  List(\"notUsed\"),                // callSetIds\n  \"22\",                           // referenceName\n  38617521,                       // start\n  38617523,                       // end\n  10,                             // pageSize\n  \"notUsed\"                       // pageToken\n)","outputs":[{"name":"stdout","output_type":"stream","text":"import org.ga4gh.methods.SearchVariantsRequest\nimport scala.collection.JavaConversions._\nrequest: org.ga4gh.methods.SearchVariantsRequest = {\"variantSetIds\": [\"med-at-scale\\/chr22.vcf\"], \"variantName\": \"notUsed\", \"callSetIds\": [\"notUsed\"], \"referenceName\": \"22\", \"start\": 38617521, \"end\": 38617523, \"pageSize\": 10, \"pageToken\": \"notUsed\"}\n"},{"metadata":{},"data":{"text/html":"{&quot;variantSetIds&quot;: [&quot;med-at-scale\\/chr22.vcf&quot;], &quot;variantName&quot;: &quot;notUsed&quot;, &quot;callSetIds&quot;: [&quot;notUsed&quot;], &quot;referenceName&quot;: &quot;22&quot;, &quot;start&quot;: 38617521, &quot;end&quot;: 38617523, &quot;pageSize&quot;: 10, &quot;pageToken&quot;: &quot;notUsed&quot;}"},"output_type":"execute_result","execution_count":10}]},{"metadata":{"trusted":true,"collapsed":false},"cell_type":"code","source":"import org.ga4gh.methods.SearchVariantsResponse\nimport org.ga4gh.models.Variant\nval result:SearchVariantsResponse = Proxy.instance.searchVariants(request)\nval variants:List[Variant] = result.variants.toList\nlayout(2, variants.map{ v => \n  html(<pre>{s\"\"\"\n  |  id             : ${v.id}\n  |  variantSetId   : ${v.variantSetId}\n  |  names          : ${v.names}\n  |  created        : ${v.created}\n  |  updated        : ${v.updated}\n  |  referenceName  : ${v.referenceName}\n  |  start          : ${v.start}\n  |  end            : ${v.end}\n  |  referenceBases : ${v.referenceBases}\n  |  alternateBases : ${v.alternateBases}\n  |  info           : ${v.info}\n  |  calls          : ${v.calls}\n  \"\"\".stripMargin}</pre>)\n})","outputs":[{"name":"stdout","output_type":"stream","text":"warning: there were 13 deprecation warning(s) re-run with -deprecation for details\nimport org.ga4gh.methods.SearchVariantsResponse\nimport org.ga4gh.models.Variant\nresult: org.ga4gh.methods.SearchVariantsResponse = {\"variants\": [{\"id\": \"78774789-fd4d-40cb-9017-01dea0bdaae7\", \"variantSetId\": \"s3n:\\/\\/med-at-scale\\/1000genomes\\/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam\\/\", \"names\": [\"\"], \"created\": 0, \"updated\": 0, \"referenceName\": \"22\", \"start\": 38617521, \"end\": 38617522, \"referenceBases\": \"C\", \"alternateBases\": [\"T\"], \"info\": {}, \"calls\": [{\"callSetId\": \"22\", \"callSetName\": \"1000genomes\", \"genotype\": [0, 0], \"phaseset\": null, \"genotypeLikelihood\": [0.0, 0.5, 0.5], \"info\": {}}]}, {\"id\": \"e47948e0-8b86-4af9-9a4d-10e745a86dae\", \"variantSetId\": \"s3n:\\/\\/med-at-scale\\/1000genomes\\/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genot..."},{"metadata":{},"data":{"text/html":"<table><tr><td><pre>\n  id             : 78774789-fd4d-40cb-9017-01dea0bdaae7\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td><td><pre>\n  id             : e47948e0-8b86-4af9-9a4d-10e745a86dae\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td></tr><tr><td><pre>\n  id             : 33b9b154-2a18-44ff-bf77-852625790b55\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.19, 0.5], &quot;info&quot;: {}}]\n  </pre></td><td><pre>\n  id             : 62d0b08c-cccc-4403-b0b3-a96a27fae982\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td></tr><tr><td><pre>\n  id             : 28512102-bb14-4017-8430-b96db7672552\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td><td><pre>\n  id             : ce6a1dac-a980-4f3e-9724-ad8b88c5f212\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td></tr><tr><td><pre>\n  id             : efe627bc-dc7e-41ff-affb-529a842bac69\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td><td><pre>\n  id             : 059a80e1-f460-4db6-ba55-aa2db6527241\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td></tr><tr><td><pre>\n  id             : 76905adf-709e-4a74-bc38-47e09a1d5756\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.21, 0.5], &quot;info&quot;: {}}]\n  </pre></td><td><pre>\n  id             : d5c13f57-0c69-465c-bfe0-a5cbbeb3f2ca\n  variantSetId   : s3n://med-at-scale/1000genomes/ALL.chr22.integrated_phase1_v3.20101123.snps_indels_svs.genotypes.vcf.adam/\n  names          : []\n  created        : 0\n  updated        : 0\n  referenceName  : 22\n  start          : 38617521\n  end            : 38617522\n  referenceBases : C\n  alternateBases : [T]\n  info           : {}\n  calls          : [{&quot;callSetId&quot;: &quot;22&quot;, &quot;callSetName&quot;: &quot;1000genomes&quot;, &quot;genotype&quot;: [0, 0], &quot;phaseset&quot;: null, &quot;genotypeLikelihood&quot;: [0.0, 0.5, 0.5], &quot;info&quot;: {}}]\n  </pre></td></tr></table>"},"output_type":"execute_result","execution_count":21}]},{"metadata":{"trusted":true,"collapsed":true},"cell_type":"code","source":"// cleanup\nclient.close()","outputs":[]}],"nbformat":4},"name":"GA4GH Client","path":"GA4GH%20Client.snb","writable":true}